{
  "version": 3,
  "sources": ["src/app/services/auth.service.ts"],
  "sourcesContent": ["import { Injectable, inject } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable, BehaviorSubject, tap } from 'rxjs';\r\nimport { AuthResponse, LoginRequest, RegisterRequest } from '../models/user.model';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class AuthService {\r\n  private apiUrl = 'http://localhost:8080/api';\r\n  private http = inject(HttpClient);\r\n  private currentUserSubject = new BehaviorSubject<AuthResponse | null>(null);\r\n  public currentUser$ = this.currentUserSubject.asObservable();\r\n\r\n  constructor() {\r\n    const token = localStorage.getItem('token');\r\n    if (token) {\r\n      const user = JSON.parse(localStorage.getItem('user') || '{}');\r\n      this.currentUserSubject.next(user);\r\n    }\r\n  }\r\n\r\n  login(credentials: LoginRequest): Observable<AuthResponse> {\r\n    return this.http.post<AuthResponse>(`${this.apiUrl}/auth/login`, credentials).pipe(\r\n      tap(response => {\r\n        localStorage.setItem('token', response.token);\r\n        localStorage.setItem('user', JSON.stringify(response));\r\n        this.currentUserSubject.next(response);\r\n      })\r\n    );\r\n  }\r\n\r\n  register(request: RegisterRequest): Observable<AuthResponse> {\r\n    return this.http.post<AuthResponse>(`${this.apiUrl}/auth/register`, request).pipe(\r\n      tap(response => {\r\n        localStorage.setItem('token', response.token);\r\n        localStorage.setItem('user', JSON.stringify(response));\r\n        this.currentUserSubject.next(response);\r\n      })\r\n    );\r\n  }\r\n\r\n  logout(): void {\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('user');\r\n    this.currentUserSubject.next(null);\r\n  }\r\n\r\n  getToken(): string | null {\r\n    return localStorage.getItem('token');\r\n  }\r\n\r\n  getUserRole(): string | null {\r\n    const user = this.currentUserSubject.value;\r\n    return user?.role || null;\r\n  }\r\n\r\n  isAuthenticated(): boolean {\r\n    return !!this.getToken();\r\n  }\r\n}"],
  "mappings": ";;;;;;;;;;;AAQM,IAAO,cAAP,MAAO,aAAW;EACd,SAAS;EACT,OAAO,OAAO,UAAU;EACxB,qBAAqB,IAAI,gBAAqC,IAAI;EACnE,eAAe,KAAK,mBAAmB,aAAY;EAE1D,cAAA;AACE,UAAM,QAAQ,aAAa,QAAQ,OAAO;AAC1C,QAAI,OAAO;AACT,YAAM,OAAO,KAAK,MAAM,aAAa,QAAQ,MAAM,KAAK,IAAI;AAC5D,WAAK,mBAAmB,KAAK,IAAI;IACnC;EACF;EAEA,MAAM,aAAyB;AAC7B,WAAO,KAAK,KAAK,KAAmB,GAAG,KAAK,MAAM,eAAe,WAAW,EAAE,KAC5E,IAAI,cAAW;AACb,mBAAa,QAAQ,SAAS,SAAS,KAAK;AAC5C,mBAAa,QAAQ,QAAQ,KAAK,UAAU,QAAQ,CAAC;AACrD,WAAK,mBAAmB,KAAK,QAAQ;IACvC,CAAC,CAAC;EAEN;EAEA,SAAS,SAAwB;AAC/B,WAAO,KAAK,KAAK,KAAmB,GAAG,KAAK,MAAM,kBAAkB,OAAO,EAAE,KAC3E,IAAI,cAAW;AACb,mBAAa,QAAQ,SAAS,SAAS,KAAK;AAC5C,mBAAa,QAAQ,QAAQ,KAAK,UAAU,QAAQ,CAAC;AACrD,WAAK,mBAAmB,KAAK,QAAQ;IACvC,CAAC,CAAC;EAEN;EAEA,SAAM;AACJ,iBAAa,WAAW,OAAO;AAC/B,iBAAa,WAAW,MAAM;AAC9B,SAAK,mBAAmB,KAAK,IAAI;EACnC;EAEA,WAAQ;AACN,WAAO,aAAa,QAAQ,OAAO;EACrC;EAEA,cAAW;AACT,UAAM,OAAO,KAAK,mBAAmB;AACrC,WAAO,MAAM,QAAQ;EACvB;EAEA,kBAAe;AACb,WAAO,CAAC,CAAC,KAAK,SAAQ;EACxB;;qCAnDW,cAAW;EAAA;4EAAX,cAAW,SAAX,aAAW,WAAA,YAFV,OAAM,CAAA;;;sEAEP,aAAW,CAAA;UAHvB;WAAW;MACV,YAAY;KACb;;;",
  "names": []
}
