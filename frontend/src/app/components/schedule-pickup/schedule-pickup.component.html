<div class="pickup-page">
  <div class="container">
    <div class="back-button-container">
      <button class="btn btn-outline-primary btn-back" (click)="goToHome()">
        <i class="bi bi-house-door"></i> Back to Home
      </button>
    </div>
    <div class="page-header">
      <h1><i class="fas fa-calendar-check"></i> Schedule a Pickup</h1>
      <p>Book a convenient time for package collection</p>
    </div>

    <div class="row">
      <div class="col-lg-8 mx-auto">
        <div class="pickup-form-card">
          <form [formGroup]="pickupForm" (ngSubmit)="onSubmit()">
            <div class="form-section">
              <h3><i class="fas fa-clock"></i> Pickup Schedule</h3>
              <div class="row">
                <div class="col-md-6 mb-3">
                  <label class="form-label">Pickup Date *</label>
                  <input type="date" 
                         class="form-control" 
                         formControlName="pickupDate"
                         [min]="minDate"
                         [class.is-invalid]="f['pickupDate'].invalid && f['pickupDate'].touched">
                  <div class="invalid-feedback" *ngIf="f['pickupDate'].invalid && f['pickupDate'].touched">
                    Pickup date is required
                  </div>
                </div>
                <div class="col-md-6 mb-3">
                  <label class="form-label">Preferred Time *</label>
                  <select class="form-select" 
                          formControlName="pickupTime"
                          [class.is-invalid]="f['pickupTime'].invalid && f['pickupTime'].touched">
                    <option value="">Select time</option>
                    <option value="morning">Morning (8AM - 12PM)</option>
                    <option value="afternoon">Afternoon (12PM - 4PM)</option>
                    <option value="evening">Evening (4PM - 7PM)</option>
                  </select>
                  <div class="invalid-feedback" *ngIf="f['pickupTime'].invalid && f['pickupTime'].touched">
                    Pickup time is required
                  </div>
                </div>
              </div>
            </div>

            <div class="form-section">
              <h3><i class="fas fa-user"></i> Contact Information</h3>
              <div class="row">
                <div class="col-md-6 mb-3">
                  <label class="form-label">Contact Name *</label>
                  <input type="text" 
                         class="form-control" 
                         formControlName="contactName"
                         [class.is-invalid]="f['contactName'].invalid && f['contactName'].touched">
                  <div class="invalid-feedback" *ngIf="f['contactName'].invalid && f['contactName'].touched">
                    Valid name required (min 2 characters)
                  </div>
                </div>
                <div class="col-md-6 mb-3">
                  <label class="form-label">Phone Number *</label>
                  <input type="tel" 
                         class="form-control" 
                         formControlName="contactPhone"
                         placeholder="+23276543210"
                         [class.is-invalid]="f['contactPhone'].invalid && f['contactPhone'].touched">
                  <div class="invalid-feedback" *ngIf="f['contactPhone'].invalid && f['contactPhone'].touched">
                    Format: +232XXXXXXXX
                  </div>
                </div>
              </div>
              <div class="mb-3">
                <label class="form-label">Pickup Address *</label>
                <textarea class="form-control" 
                          formControlName="address" 
                          rows="3"
                          [class.is-invalid]="f['address'].invalid && f['address'].touched"></textarea>
                <div class="invalid-feedback" *ngIf="f['address'].invalid && f['address'].touched">
                  Address required (min 10 characters)
                </div>
              </div>
            </div>

            <div class="form-section">
              <h3><i class="fas fa-box"></i> Package Details</h3>
              <div class="mb-3">
                <label class="form-label">Number of Packages *</label>
                <input type="number" 
                       class="form-control" 
                       formControlName="packageCount"
                       min="1"
                       [class.is-invalid]="f['packageCount'].invalid && f['packageCount'].touched">
              </div>
              <div class="mb-3">
                <label class="form-label">Special Instructions</label>
                <textarea class="form-control" 
                          formControlName="specialInstructions" 
                          rows="3"
                          placeholder="Any special handling requirements..."></textarea>
              </div>
            </div>

            <div class="form-actions">
              <button type="button" class="btn btn-secondary" routerLink="/">Cancel</button>
              <button type="submit" class="btn btn-primary">
                <i class="fas fa-check"></i> Schedule Pickup
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
